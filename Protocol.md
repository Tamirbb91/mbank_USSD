# Хавсарлт.Б: Мэдээлэл солилцох протокол

## Request URL

Format: 

http://ServerName:PORT/ApplicationName/ServletName?key1=value1&key2=value2&key3=value3

Query string i.e., key=value pair that comes after ‘?’ are:
-	username
-	password
-	source (Customer’s mobile number)
-	text (Customer’s input on any screen)
-	session id


Example:
http://localhost:8080/mbank?source=9986180133&text=5530&sessionId=1845231988132124313213

User name and Password given by USSD framework to operator to ensure the request is coming from a trusted client.
	
Source is the Customer’s mobile that is accessing the USSD application.

Text is the Customer’s input on any screen.

Session Id is the unique number (for a Customer) to assist the USSD application to serve a particular Customer with data relevant to him/her. The same should be generated by Aggregator and retained across each request-response made by the Customer.




## Response Format


Below is the sample of a response xml that will be given to USSD aggregator from USSD framework.


This response XML has 4 major components:

1. Content to be displayed on Customer’s screen:
Here the member name is message. This is what the USSD aggregator should identify and display on Customer’s screen.

2.	Session Id:
This is initially generated by USSD aggregator and sent to USSD framework through the URL parameters. In order to keep the session intact, USSD aggregator sends the same session id back to USSD aggregator. This continues for each request and response that is exchanged between USSD aggregator and framework. Session Id is unique for each Customer. Here the member name is session.

3.	Cont
The possible values here are Cont (Continue) or end signifying whether the response carried is the last screen to be shown by Aggregator. If the value is ‘Cont’, then aggregator should understand that session is still valid and there are more screens to come. On the other hand, if value is ‘end’ then that would clearly state the aggregator that there are no screens following the current one and the session can be invalidated.Here the member name is type.

4.	Customer Mobile Number
This is the Mobile number of the Customer that has launched the USSD application and continuing to transact (request for services) on USSD application. Here the member name is msisdn.


Some Examples:


LAUNCH 

http://localhost:8080/mbank?username=user&password=pass&source=80888989&text=5530&sessionId=1845231988132124313213

Note: text can be any positive integer for launch module

Response XML:
```xml
<methodResponse>
	<params>
		<param>
			<value>
				<struct>
					<member>
						<name>message</name>
						<value>
							<string>Hello. Welcome to USSD Banking. Enter your 4 digit USSD Banking PIN. </string>
						</value>
					</member>
					<member>
						<name>session</name>
						<value>
							<string>1845231988132124313213</string>
						</value>
					</member>
					<member>
						<name>type</name>
						<value>
							<string>cont</string>
						</value>
					</member>
					<member>
						<name>msisdn</name>
						<value>
							<string>80888989</string>
						</value>
					</member>
				</struct>
			</value>
		</param>
	</params>
</methodResponse>
```

Accounts list

URL:
http://localhost:8080/mbank?username=user&password=pass&source=80888989&text=1&sessionId=1845231988132124313213

Note: Should a numeric value that is corresponding to an item on screen. Here its 1 as we have selected Balance Enquiry.


Response XML:
```xml
<methodResponse>
	<params>
		<param>
			<value>
				<struct>
					<member>
						<name>message</name>
						<value>
							<string>
								Please Choose an Account: 
								1. Overdraft XXXXXX0023 
								2. Overdraft XXXXXXXX0636 
								3. Savings XXXXXX1142 
								4. Loan XXXXXX5030 
								0 for next
							</string>
						</value>
					</member>
					<member>
						<name>session</name>
						<value>
							<string>1845231988132124313213</string>
						</value>
					</member>
					<member>
						<name>type</name>
						<value>
							<string>cont</string>
						</value>
					</member>
					<member>
						<name>msisdn</name>
						<value>
							<string>80888989</string>
						</value>
					</member>
				</struct>
			</value>
		</param>
	</params>
</methodResponse>
```